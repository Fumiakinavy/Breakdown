# Model/Task.swift ナラティブ

## 2025-10-21T11:59:15Z 事前計画
### 概要
タスクとステップのドメインモデル、ステータスやコンフリクト指標を表現する型を定義する。
### 目的
ビューやデータストレージを問わず一貫したデータ構造を提供し、計算ロジックを集約する。
### 最適な実装方法
`Task`と`TaskStep`の`struct`を作成し、識別子に`UUID`、ステータスに`enum`を採用。コンフリクトスコア計算メソッドもモデル層に配置する。
### 最適と思われる理由
値型かつ`Identifiable`にすることでSwiftUIのリスト更新に適し、計算ロジックが再利用しやすい。
### 入出力
入力: タスク生成や更新リクエスト。  
出力: 表示・保存に利用可能なモデル値とコンフリクトスコア。

## 2025-10-21T12:04:35Z 実装後記録
### 概要
`TaskStatus`や`TaskStepState`などの列挙型、`Task`/`TaskStep`モデル、コンフリクト計算ユーティリティ、サンプルデータを実装した。
### 目的
アプリ全体で共通して利用できるデータ構造とテスト用データセットを提供し、ビュー・モデルの基盤を整えた。
### 最適な実装方法
値型モデルを`Codable`/`Identifiable`にし、`TaskConflictAnalyzer`で可処分時間に対する負荷比率を0〜1に正規化するアルゴリズムを実装。
### 最適と思われる理由
UI・データ層双方で活用でき、今後Core Data移行時も型インタフェースを維持しやすい。
### 入出力
入力: タスク・ステップ情報、可処分時間設定。  
出力: モデル配列、タスクID毎のコンフリクトスコア。
### 実装の評価
基本的なドメイン要件をカバーし、サンプルデータでUIを即確認できる。評価: 95/100。

## 2025-10-22T02:09:35Z 追加記録
### 概要
時間帯スロットの概念を優先度(`TaskPriority`)へ置き換え、高・中・低のラベルを提供した。
### 目的
ユーザー要望に合わせてタスク登録時の選択肢を優先度ベースへ変更し、後続のフィルタリング基盤とする。
### 最適な実装方法
列挙型を`TaskPriority`として再定義し、`Task`モデルのプロパティを`priority`に変更。サンプルデータも新しい値に更新。
### 最適と思われる理由
ドメイン層で優先度を持つことで、UIだけでなく将来的なソート・分析にも利用できる。
### 入出力
入力: 優先度を含むタスク追加リクエスト。  
出力: 優先度情報を保持した`Task`モデル。
### 実装の評価
モデル・サンプルデータが一貫した形で更新でき、リグレッションもなくビルドが通る。評価: 96/100。
